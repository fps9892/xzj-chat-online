{
  "rules": {
    ".read": "true",
    ".write": "auth != null",
    "admins": {
      "$adminId": {
        ".read": "auth != null && (auth.uid === $adminId || root.child('admins').child(auth.uid).exists())",
        ".write": "auth != null && root.child('admins').child(auth.uid).exists()"
      }
    },
    "moderators": {
      "$moderatorId": {
        ".read": "auth != null && (auth.uid === $moderatorId || root.child('admins').child(auth.uid).exists() || root.child('moderators').child(auth.uid).exists())",
        ".write": "auth != null && root.child('admins').child(auth.uid).exists()"
      }
    },
    "banned": {
      "$bannedId": {
        ".read": "auth != null && (root.child('admins').child(auth.uid).exists() || root.child('moderators').child(auth.uid).exists())",
        ".write": "auth != null && (root.child('admins').child(auth.uid).exists() || root.child('moderators').child(auth.uid).exists())"
      }
    },
    "users": {
      "$userId": {
        ".read": "auth != null && (auth.uid === $userId || root.child('admins').child(auth.uid).exists() || root.child('moderators').child(auth.uid).exists())",
        ".write": "auth != null && (auth.uid === $userId || root.child('admins').child(auth.uid).exists())"
      }
    },
    "rooms": {
      "$roomId": {
        ".read": "true",
        ".write": "auth != null && (root.child('admins').child(auth.uid).exists() || root.child('moderators').child(auth.uid).exists())",
        "messages": {
          "$messageId": {
            ".read": "true",
            ".write": "auth != null && !root.child('banned').child(auth.uid).exists()"
          }
        },
        "users": {
          "$userId": {
            ".read": "true",
            ".write": "auth != null && !root.child('banned').child(auth.uid).exists()"
          }
        },
        "typing": {
          "$userId": {
            ".read": "true",
            ".write": "auth != null && auth.uid === $userId && !root.child('banned').child(auth.uid).exists()"
          }
        }
      }
    },
    "pinnedMessages": {
      "$messageId": {
        ".read": "true",
        ".write": "auth != null && (root.child('admins').child(auth.uid).exists() || root.child('moderators').child(auth.uid).exists())"
      }
    }
  }
}